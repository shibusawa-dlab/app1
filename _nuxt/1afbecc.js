(window.webpackJsonp=window.webpackJsonp||[]).push([[28,12],{325:function(t,e,r){"use strict";var n=r(18),o=r(7),c=r(88),l=r(25),h=r(20),d=r(65),f=r(149),y=r(86),m=r(8),v=r(66),w=r(87).f,P=r(53).f,k=r(22).f,R=r(218).trim,I="Number",x=o.Number,E=x.prototype,_=d(v(E))==I,O=function(t){var e,r,n,o,c,l,h,code,d=y(t,!1);if("string"==typeof d&&d.length>2)if(43===(e=(d=R(d)).charCodeAt(0))||45===e){if(88===(r=d.charCodeAt(2))||120===r)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+d}for(l=(c=d.slice(2)).length,h=0;h<l;h++)if((code=c.charCodeAt(h))<48||code>o)return NaN;return parseInt(c,n)}return+d};if(c(I,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var j,F=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof F&&(_?m((function(){E.valueOf.call(r)})):d(r)!=I)?f(new x(O(e)),r,F):O(e)},C=n?w(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),N=0;C.length>N;N++)h(x,j=C[N])&&!h(F,j)&&k(F,j,P(x,j));F.prototype=E,E.constructor=F,l(o,I,F)}},350:function(t,e,r){"use strict";r.r(e);r(217);var n=r(60),o=r(147),c=r(148),l=r(109),h=r(15),d=(r(36),r(220));function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(l.a)(t);if(e){var o=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(c.a)(this,r)}}var y=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},m=function(t){Object(o.a)(r,t);var e=f(r);function r(){var t;return Object(n.a)(this,r),(t=e.apply(this,arguments)).baseUrl="https://shibusawa-dlab.github.io/app1",t}return r}(d.Vue);y([Object(d.Prop)({default:4})],m.prototype,"col",void 0),y([Object(d.Prop)({default:[]})],m.prototype,"list",void 0);var v=m=y([d.Component],m),w=r(59),component=Object(w.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",t._l(t.list,(function(e,n){return r("v-col",{key:n,attrs:{cols:"12",sm:12/t.col}},[r("v-card",{staticClass:"mb-4",attrs:{flat:"","no-body":""}},[r("nuxt-link",{attrs:{to:t.localePath(e.path)}},[e.image&&e.image.includes("mdi-")?[r("div",{staticClass:"text-center grey lighten-2 pa-10",staticStyle:{height:"150px"}},[r("v-icon",{attrs:{size:"75"}},[t._v(t._s(e.image))])],1)]:[r("v-img",{staticClass:"grey lighten-2",staticStyle:{height:"150px"},attrs:{src:e.image,contain:"",width:"100%"}})]],2),t._v(" "),r("div",{staticClass:"pa-4"},[r("nuxt-link",{attrs:{to:t.localePath(e.path)}},[r("h4",[t._v(t._s(e.label))])]),t._v(" "),e.description?r("p",{staticClass:"mt-2 mb-0"},[t._v(t._s(e.description))]):t._e()],1),t._v(" "),(e.url,t._e())],2)],1)})),1)}),[],!1,null,null,null);e.default=component.exports},440:function(t,e,r){"use strict";r.r(e);r(217);var n=r(3),o=r(60),c=r(61),l=r(147),h=r(148),d=r(109),f=r(15),y=(r(24),r(36),r(42),r(150),r(57),r(325),r(51),r(56),r(222),r(90),r(221),r(64),r(110)),m=r(73),v=r.n(m);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var P=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},k=function(t){Object(l.a)(y,t);var e,r,h,d,f=w(y);function y(){var t;return Object(o.a)(this,y),(t=f.apply(this,arguments)).baseUrl="https://shibusawa-dlab.github.io/app1",t.keyword="",t.settings={agential:{type:"type:Agent",query:"fc-agentials",label:"人物"},place:{type:"type:Place",query:"fc-places",label:"場所"}},t.loadingFlag=!0,t.results=[],t.label="",t.people=[],t.total=0,t.perPage=20,t.currentPage=1,t.id="",t.index={},t.keywordStr="",t}return Object(c.a)(y,[{key:"watchTmp",value:function(){this.search()}},{key:"mounted",value:(d=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createIndex();case 2:return t.next=4,this.search();case 4:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"createIndex",value:(h=Object(n.a)(regeneratorRuntime.mark((function t(){var e,r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get(this.baseUrl+"/data/entity.json");case 2:e=(e=t.sent).data,r=this.$route.params.id,n=this.$route.query.keyword||"",this.keyword=n,o="agential"===r?r:"spatial",this.id=r,this.index=e[o];case 10:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"paginationLength",get:function(){return Math.ceil(this.total/this.perPage)}},{key:"getTotal",value:(r=Object(n.a)(regeneratorRuntime.mark((function t(){var e,r,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="agential"===this.id?"Agent":"Place",r=this.$route.query.keyword||"",n="\n      PREFIX schema: <http://schema.org/>\n      PREFIX type: <https://jpsearch.go.jp/term/type/>\n      PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n      PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n      PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      PREFIX owl: <http://www.w3.org/2002/07/owl#>\n      PREFIX dct: <http://purl.org/dc/terms/>\n      PREFIX hpdb: <https://w3id.org/hpdb/api/>\n      PREFIX sh: <http://www.w3.org/ns/shacl#>\n      SELECT DISTINCT (count(DISTINCT ?s) as ?c) WHERE {\n        ?cho ?x ?s . \n        ?s rdf:type type:".concat(e," . \n        ").concat(""!==r?"?s rdfs:label ?label . filter regex(?label, '"+r+"', 'i')":"","\n      }\n    "),o=(o="https://dydra.com/ut-digital-archives/shibusawa/sparql?query=")+encodeURIComponent(n)+"&output=json",t.next=7,v.a.get(o);case 7:return c=t.sent,t.abrupt("return",c.data[0].c);case 9:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"search",value:function(){var t=this.index,e=this.id,r="agential"===e?e:"spatial";this.loadingFlag=!0;var n=Number(this.$route.query.from)||0;this.currentPage=n/this.perPage+1;var o=this.keyword,c=[];for(var label in t){var l=t[label];if(""===o||label.includes(o)){var h={label:label+" ("+l.value.toLocaleString()+")",path:{name:"entity-entity-id",params:{entity:r,id:label}}};l.image?h.image=l.image:h.image="https://shibusawa-dlab.github.io/app1/img/icons/no-image.png";var d="https://shibusawa-dlab.github.io/app1/snorql/?describe="+l.id;h.url=d,c.push(h)}}this.total=c.length,c=c.splice(n,n+this.perPage),this.people=c,this.loadingFlag=!1}},{key:"search2",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(){var e,r,n,o,c,l,h,d,f=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$route.params.id,this.id=e,t.next=4,this.getTotal();case 4:r=t.sent,this.total=r,this.loadingFlag=!0,n=this.settings[e],o=n.type,c=Number(this.$route.query.from)||0,this.currentPage=c/this.perPage+1,l=this.$route.query.keyword||"",h="\n      PREFIX schema: <http://schema.org/>\n      PREFIX type: <https://jpsearch.go.jp/term/type/>\n      PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n      PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n      PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      PREFIX owl: <http://www.w3.org/2002/07/owl#>\n      PREFIX dct: <http://purl.org/dc/terms/>\n      PREFIX hpdb: <https://w3id.org/hpdb/api/>\n      PREFIX sh: <http://www.w3.org/ns/shacl#>\n      SELECT DISTINCT ?s ?label ?image (count(DISTINCT ?cho) as ?c) WHERE {\n        ?cho ?x ?s . \n        ?s rdfs:label ?label;  rdf:type ".concat(o," . \n        ").concat(""!==l?"filter regex(?label, '"+l+"', 'i')":"","\n            optional { ?s schema:image ?image } \n      }\n      GROUP BY ?s ?label ?image\n      ORDER BY desc(?c)\n      LIMIT ").concat(this.perPage,"\n      OFFSET ").concat(c,"\n    "),d=(d="https://dydra.com/ut-digital-archives/shibusawa/sparql?query=")+encodeURIComponent(h)+"&output=json",v.a.get(d).then((function(t){for(var r=t.data,n=[],i=0;i<r.length;i++){var o=r[i];if(!o.label.value){var c="agential"===e?e:"spatial";"dev_MAIN[refinementList][".concat(c,"][0]"),o.label;var l={label:o.label+" ("+o.c.toLocaleString()+")",path:{name:"entity-entity-id",params:{entity:c,id:o.label}}};o.image?l.image=o.image:l.image="https://shibusawa-dlab.github.io/app1/img/icons/no-image.png";var h="https://shibusawa-dlab.github.io/app1/snorql/?describe="+o.s;l.url=h,n.push(l)}}f.people=n,f.loadingFlag=!1}));case 16:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"title",get:function(){return this.$t(this.settings[this.$route.params.id].label)}},{key:"head",value:function(){return{title:this.$t("category")+" : "+this.title,meta:[{hid:"description",name:"description",content:this.$t("search_by_category")}]}}},{key:"setCurrentPage",value:function(t){var e=(t-1)*this.perPage,r=Object.assign({},this.$route.query);r.from=e,this.$router.push(this.localePath({name:"entity-id",params:{id:this.id},query:r}),(function(){}),(function(){}))}},{key:"trigger",value:function(t){13===t.keyCode&&this.updateQuery()}},{key:"updateQuery",value:function(){var t=Object.assign({},this.$route.query);t.keyword=this.keyword,delete t.from,this.$router.push(this.localePath({name:"entity-id",params:{id:this.id},query:t}),(function(){}),(function(){}))}},{key:"updateQuery2",value:function(){var t,e=Object.assign({},this.$route.query),r=this.keywordStr;r||(r=""),t=r.startsWith('"')&&r.endsWith('"')?[r]:r.split(" "),e.keyword=t,delete e.from,this.$router.push(this.localePath({name:"entity-id",params:{id:this.id},query:e}),(function(){}),(function(){}))}},{key:"bh",get:function(){return[{text:this.$t("top"),disabled:!1,to:this.localePath({name:"index"}),exact:!0},{text:this.$t("person_place"),disabled:!1,to:this.localePath({name:"entity"}),exact:!0},{text:this.title}]}}]),y}(y.Vue);P([Object(y.Watch)("$route",{deep:!0})],k.prototype,"watchTmp",null);var R=k=P([Object(y.Component)({})],k),I=r(59),component=Object(I.a)(R,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-sheet",{attrs:{color:"grey lighten-2"}},[r("v-container",{staticClass:"py-4",attrs:{fluid:""}},[r("v-breadcrumbs",{staticClass:"py-0",attrs:{items:t.bh},scopedSlots:t._u([{key:"divider",fn:function(){return[r("v-icon",[t._v("mdi-chevron-right")])]},proxy:!0}])})],1)],1),t._v(" "),r("v-container",[r("h2",{staticClass:"my-5"},[t._v("\n      "+t._s(t.title)+" "),r("small",[t._v("（"+t._s(t.total.toLocaleString())+"）")])]),t._v(" "),t.loadingFlag?[r("div",{staticClass:"text-center my-5"},[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)]:[r("v-row",{staticClass:"mt-5",attrs:{align:"center"}},[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{staticClass:"px-4",attrs:{"single-line":"","background-color":"grey lighten-3",filled:"",rounded:"",dense:"",label:t.$t("add_a_search_term"),"append-icon":"mdi-magnify",clearable:"","clear-icon":"mdi-close-circle"},on:{"click:append":function(e){return t.updateQuery()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.trigger(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword/*keywordStr*/"}})],1)],1),t._v(" "),r("div",{staticClass:"text-center mt-5 mb-10"},[r("v-pagination",{attrs:{length:t.paginationLength,"total-visible":7},on:{input:t.setCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),r("grid",{attrs:{col:4,list:t.people}}),t._v(" "),r("div",{staticClass:"text-center my-5"},[r("v-pagination",{attrs:{length:t.paginationLength,"total-visible":7},on:{input:t.setCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]],2)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Grid:r(350).default})}}]);