(window.webpackJsonp=window.webpackJsonp||[]).push([[36,14,15,16],{331:function(t,e,n){var content=n(345);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(63).default)("01f3f0d4",content,!1,{sourceMap:!1})},344:function(t,e,n){"use strict";n(331)},345:function(t,e,n){var r=n(62)(!1);r.push([t.i,"tei-persName[data-v-4426f210]{background-color:#ffccbc}tei-placeName[data-v-4426f210]{background-color:#c8e6c9}tei-date[data-v-4426f210]{background-color:#bbdefb}tei-time[data-v-4426f210]{background-color:#fff9c4}tei-head[data-v-4426f210]{margin:20px;font-size:large!important;font-weight:700}",""]),t.exports=r},348:function(t,e,n){var content=n(365);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(63).default)("46d20b4a",content,!1,{sourceMap:!1})},352:function(t,e,n){"use strict";n.r(e);n(217);var r=n(60),o=n(61),c=n(147),l=n(148),f=n(109),d=n(15),v=(n(36),n(219),n(110));function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var h=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},y=function(t){Object(c.a)(n,t);var e=m(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).baseUrl="https://shibusawa-dlab.github.io/app1",t}return Object(o.a)(n,[{key:"canvas",get:function(){return this.$store.getters.canvas},set:function(t){this.$store.commit("setCanvas",t)}},{key:"facs",get:function(){return this.$store.getters.getFacs},set:function(t){this.$store.commit("setFacs",t)}},{key:"getTextContent",value:function(element){var text="";if(element.text&&(text+=element.text.trim()),element.elements)for(var i=0;i<element.elements.length;i++)text+=this.getTextContent(element.elements[i]);return text.trim()}}]),n}(v.Vue);h([Object(v.Prop)({})],y.prototype,"element",void 0);var w=y=h([Object(v.Component)({components:{TeiElement:x},name:"TeiElement"})],y),_=(n(344),n(59)),component=Object(_.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.element.name||"span",{tag:"component"},[("tei-date"==t.element.name||"tei-time"==t.element.name)&&t.element.attributes&&t.element.attributes.when?[n("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n("span",t._g(t._b({},"span",o,!1),r),[t._v(t._s(t.element.elements[0].text))])]}}],null,!1,1766447786)},[t._v(" "),n("span",[t._v(t._s(t.element.attributes.when))])])]:"text"==t.element.type?[t._v("\n    "+t._s(t.element.text)+"\n  ")]:["tei-pb"==t.element.name&&t.element.attributes&&t.element.attributes.corresp?[n("div",{staticClass:"ma-2"},[n("v-icon",{staticClass:"ma-1",attrs:{color:"purple"},on:{click:function(e){t.canvas=t.facs[t.element.attributes.corresp.replace("#","")]}}},[t._v("mdi-image")]),t._v(" "),n("span",{staticClass:"ma-1",staticStyle:{color:"grey"}},[t._v("[Page @"+t._s(t.element.attributes.corresp)+"]")])],1)]:t._e(),t._v(" "),t._l(t.element.elements,(function(t,e){return n("TeiElement",{key:e,attrs:{element:t}})}))]],2)}),[],!1,null,"4426f210",null),x=e.default=component.exports},364:function(t,e,n){"use strict";n(348)},365:function(t,e,n){var r=n(62)(!1);r.push([t.i,"tei-encodingdesc,tei-publicationstmt,tei-publicationstmt>*,tei-sourcedesc{display:block!important}",""]),t.exports=r},376:function(t,e){},377:function(t,e){},381:function(t,e,n){var content=n(408);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(63).default)("36cd220e",content,!1,{sourceMap:!1})},383:function(t,e,n){"use strict";n.r(e);n(217),n(31),n(12),n(21),n(37),n(16),n(19),n(38),n(39),n(18);var r=n(60),o=n(61),c=n(147),l=n(148),f=n(109),d=n(15),v=(n(36),n(75),n(110)),m=n(343),h=n.n(m);function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var x=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){Object(c.a)(n,t);var e=_(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).items=[],t}return Object(o.a)(n,[{key:"id",get:function(){return this.$store.getters.getId},set:function(t){this.$store.commit("setId",t)}},{key:"xml",get:function(){return this.$store.getters.getXml}},{key:"created",value:function(){var text=h()(this.xml).find("tei-text")[0];"diary"===text.getAttribute("type")?this.items=this.aaa(text):"volume"===text.getAttribute("type")&&(this.items=this.bbb(text))}},{key:"aaa",value:function(element){var t,menu=[],e=y(h()(h()(element).find("tei-front")[0]).children());try{for(e.s();!(t=e.n()).done;){var n=t.value;n.hasAttribute("xml:id")&&h()(n).find("tei-head").length>0&&menu.push({label:h()(n).find("tei-head")[0].textContent,id:n.getAttribute("xml:id")})}}catch(t){e.e(t)}finally{e.f()}var r,o=y(h()(h()(element).find("tei-group")[0]).children());try{for(o.s();!(r=o.n()).done;){var c=r.value;if(c.hasAttribute("xml:id")){var head="No Title";h()(c).find("tei-head").length>0&&(head=h()(c).find("tei-head")[0].textContent),menu.push({label:head,id:c.getAttribute("xml:id")})}}}catch(t){o.e(t)}finally{o.f()}return menu}},{key:"bbb",value:function(element){var t,menu=[],e=y(h()(h()(element).find("tei-front")[0]).children());try{for(e.s();!(t=e.n()).done;){var n=t.value;n.hasAttribute("xml:id")&&h()(n).find("tei-head").length>0&&menu.push({label:h()(n).find("tei-head")[0].textContent,id:n.getAttribute("xml:id")})}}catch(t){e.e(t)}finally{e.f()}var r=h()(h()(element).find("tei-group")[0]).children(),o=h()(r)[0],c={label:"日記",disabled:!0,id:"diary",children:this.aaa(o)};menu.push(c);var l=h()(r)[2],f={label:"日時通知表",disabled:!0,id:"schedule",children:this.aaa(l)};return menu.push(f),menu}}]),n}(v.Vue),O=k=x([Object(v.Component)({})],k),j=n(59),component=Object(j.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",[n("v-list-item",[n("v-list-item-title",[n("h3",[t._v(t._s(t.$t("コンテンツ")))])])],1),t._v(" "),t._l(t.items,(function(e,r){return[e.children?[n("v-list-group",{key:r,attrs:{"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.label))])],1)]},proxy:!0}],null,!0)},[t._v(" "),t._l(e.children,(function(e,r){return[e.children?[n("v-list-group",{key:r,attrs:{"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.label))])],1)]},proxy:!0}],null,!0)},[t._v(" "),t._l(e.children,(function(e,r){return[e.label?n("v-list-item",{key:r,attrs:{disabled:e.disabled},on:{click:function(n){t.id=e.id}}},[n("v-list-item-title",[t._v(t._s(e.label))])],1):t._e()]}))],2)]:[e.label?n("v-list-item",{key:r,attrs:{disabled:e.disabled},on:{click:function(n){t.id=e.id}}},[n("v-list-item-title",[t._v(t._s(e.label))])],1):t._e()]]}))],2)]:[n("v-list-item",{key:r,attrs:{disabled:e.disabled},on:{click:function(n){t.id=e.id}}},[n("v-list-item-title",[t._v(t._s(e.label))])],1)]]}))],2)}),[],!1,null,null,null);e.default=component.exports},384:function(t,e,n){"use strict";n.r(e);n(217);var r=n(60),o=n(61),c=n(147),l=n(148),f=n(109),d=n(15),v=(n(36),n(75),n(110)),m=n(352);function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var y=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},w=n(371),_=n(343),x=function(t){Object(c.a)(n,t);var e=h(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"xml",get:function(){return this.$store.getters.getXml},set:function(t){this.$store.commit("setXml",t)}},{key:"metadata",get:function(){var t=this.xml;if(!t)return"";var header=t.querySelector("tei-teiheader");return header?(new XMLSerializer).serializeToString(header):""}},{key:"arr",get:function(){return _(_(this.xml).find("tei-teiheader")).children()}},{key:"bbb",value:function(data){if(!data)return{};var t=w.xml2json(data.outerHTML,{compact:!1,spaces:4});return JSON.parse(t).elements[0]}}]),n}(v.Vue),k=x=y([Object(v.Component)({components:{TeiElement:m.default}})],x),O=(n(364),n(59)),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-5"},t._l(t.arr,(function(e,r){return n("TeiElement",{key:r,attrs:{element:t.bbb(e)}})})),1)}),[],!1,null,null,null);e.default=component.exports},407:function(t,e,n){"use strict";n(381)},408:function(t,e,n){var r=n(62)(!1);r.push([t.i,".scroll{overflow-y:auto}.vertical{-ms-writing-mode:tb-rl;writing-mode:vertical-rl}tei-persName{background-color:#ffccbc}tei-placeName{background-color:#c8e6c9}tei-date{background-color:#bbdefb}tei-time{background-color:#fff9c4}tei-head{margin:20px;font-size:large!important;font-weight:700}",""]),t.exports=r},438:function(t,e,n){"use strict";n.r(e);n(75),n(89),n(42),n(55),n(57);var r=n(418),o=n(356),c=n.n(o),l=n(343),f=n.n(l),d=n(383),v=n(384),m={components:{Menu:d.default,Metadata:v.default},data:function(){return{baseUrl:"https://shibusawa-dlab.github.io/app1",pages:"https://shibusawa-dlab.github.io/lab1",loading:!1,width:window.innerWidth,height:window.innerHeight,drawer:!1,drawer2:!1,canvas:"",manifest:null,title:""}},head:function(){return{titleTemplate:null,title:this.title}},watch:{id:function(t){this.$router.push(this.localePath({name:"viewer-id",params:{id:this.$route.params.id},query:{id:t}}),(function(){}),(function(){})),this.scroll()}},computed:{xml:{get:function(){return this.$store.getters.getXml},set:function(t){this.$store.commit("setXml",t)}},id:{get:function(){return this.$store.getters.getId},set:function(t){this.$store.commit("setId",t)}}},mounted:function(){this.loading=!0,document.getElementById("container").addEventListener("wheel",(function(t){t.preventDefault(),document.getElementById("container").scrollLeft+=t.deltaY})),window.addEventListener("resize",this.handleResize);var t=this.$route.params.id,e=this.$route.query,n=e.u||this.pages+"/tei/"+t+".xml",o=new r.a;o.addBehaviors({tei:{graphic:function(){}}});var c=this;o.getHTML5(n,(function(data){console.log("downloaded."),c.xml=data,c.title=f()(data).find("tei-title")[0].textContent,f()("#tei").append(data);var t=f()("tei-facsimile").attr("source");c.manifest=t;for(var n=f()("tei-pb"),r=function(i){var t=n[i];if(!f()(t).attr("corresp"))return"continue";var e=f()(t).attr("corresp").replace("#",""),canvas=f()("#"+e).attr("source"),r=f()('<div class="mx-2" style="cursor: pointer;"><img width="30px" src="'.concat(c.baseUrl,'/img/icons/image-24px.svg"/><span class="ma-1" style="color : #9E9E9E">[Page @').concat(f()(t).attr("corresp"),"]</span></div>"));r.on("click",(function(){c.canvas=canvas})),f()(t).prepend(r)},i=0;i<n.length;i++)r(i);c.loading=!1,window.setTimeout((function(){var t=e.id;t&&(c.id=t)}),1)}))},methods:{handleResize:function(){this.width=window.innerWidth,this.height=window.innerHeight},scroll:function(){var t=this.id,e={container:"#container",offset:-1*document.querySelector("#container").getBoundingClientRect().width,x:!0};c.a.scrollTo("#"+t,0,e)}}},h=(n(407),n(59)),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loading?[n("div",{staticClass:"pa-10 text-center"},[n("p",[t._v("Loading...")]),t._v(" "),n("p",[t._v(t._s(t.$t("読み込みに少し時間がかかります。")))])])]:t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[n("v-navigation-drawer",{staticStyle:{"z-index":"100000"},attrs:{app:"",temporary:!1,width:384},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-btn",{staticClass:"ma-2",attrs:{icon:"",top:"",right:""},on:{click:function(e){t.drawer=!t.drawer}}},[n("v-icon",[t._v("mdi-close")])],1),t._v(" "),null!=t.xml?n("Menu"):t._e()],1),t._v(" "),n("v-navigation-drawer",{attrs:{app:"",temporary:!1,right:"",width:512},model:{value:t.drawer2,callback:function(e){t.drawer2=e},expression:"drawer2"}},[n("v-btn",{staticClass:"ma-2",attrs:{icon:"",top:"",right:""},on:{click:function(e){t.drawer2=!t.drawer2}}},[n("v-icon",[t._v("mdi-close")])],1),t._v(" "),n("Metadata")],1),t._v(" "),n("v-app-bar",{attrs:{flat:""}},[n("v-btn",{attrs:{icon:""},on:{click:function(e){t.drawer=!t.drawer}}},[n("v-icon",[t._v("mdi-view-list")])],1),t._v(" "),n("v-toolbar-title",[t._v("\n        "+t._s(t.title)+"\n      ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer2=!t.drawer2}}})],1),t._v(" "),n("v-container",{attrs:{fluid:""}},[n("v-row",{staticClass:"mt-2"},[n("v-col",{attrs:{cols:"12",sm:t.manifest?6:12}},[n("v-card",{staticClass:"scroll vertical",style:"height: "+.85*t.height+"px; width: "+(t.manifest&&"xs"!=t.$vuetify.breakpoint.name?t.width/2:t.width)+"px;",attrs:{id:"container",flat:"",outlined:""}},[n("div",{staticClass:"pa-4 px-5"},[n("div",{attrs:{id:"tei"}})])])],1),t._v(" "),n("v-col",{attrs:{cols:"12",sm:t.manifest?6:12}},[t.manifest?n("iframe",{style:"height: "+.85*t.height+"px;",attrs:{src:t.baseUrl+"/mirador/?manifest="+t.manifest+"&canvas="+t.canvas+"&bottomPanel=false",width:"100%",allowfullscreen:"allowfullscreen",frameborder:"0"}}):t._e()])],1)],1)],1)],2)}),[],!1,null,null,null);e.default=component.exports}}]);