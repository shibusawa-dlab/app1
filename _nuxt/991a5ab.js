(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{524:function(t,e,r){"use strict";r.r(e);r(285);var n=r(21),o=r(32),c=r(26),l=r(22),f=r(7),d=r(301);function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(l.a)(t);if(e){var o=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(c.a)(this,r)}}var y=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},v=function(t){Object(o.a)(r,t);var e=h(r);function r(){var t;return Object(n.a)(this,r),(t=e.apply(this,arguments)).baseUrl="https://shibusawa-dlab.github.io/app1",t}return r}(d.Vue);y([Object(d.Prop)({default:4})],v.prototype,"col",void 0),y([Object(d.Prop)({default:[]})],v.prototype,"list",void 0);var m=v=y([d.Component],v),k=r(86),w=r(119),x=r.n(w),O=r(469),P=r(466),_=r(485),j=r(489),C=r(184),R=r(152),V=r(486),$=r(462),S=r(520),component=Object(k.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",t._l(t.list,(function(e,n){return r("v-col",{key:n,attrs:{cols:"12",sm:12/t.col}},[r("v-card",{staticClass:"mb-4",attrs:{flat:"","no-body":""}},[r("nuxt-link",{attrs:{to:t.localePath(e.path)}},[e.image&&e.image.includes("mdi-")?[r("div",{staticClass:"text-center grey lighten-2 pa-10",staticStyle:{height:"150px"}},[r("v-icon",{attrs:{size:"75"}},[t._v(t._s(e.image))])],1)]:[r("v-img",{staticClass:"grey lighten-2",staticStyle:{height:"150px"},attrs:{src:e.image,contain:"",width:"100%"}})]],2),t._v(" "),r("div",{staticClass:"pa-4"},[r("nuxt-link",{attrs:{to:t.localePath(e.path)}},[r("h4",[t._v(t._s(e.label))])]),t._v(" "),e.description?r("p",{staticClass:"mt-2 mb-0"},[t._v(t._s(e.description))]):t._e()],1),t._v(" "),(e.url,t._e())],2)],1)})),1)}),[],!1,null,null,null);e.default=component.exports;x()(component,{VCard:O.a,VCardActions:P.a,VCol:_.a,VDivider:j.a,VIcon:C.a,VImg:R.a,VRow:V.a,VSpacer:$.a,VTooltip:S.a})},6909:function(t,e,r){"use strict";r.r(e);r(27),r(87),r(20),r(285),r(16),r(24),r(216),r(40),r(203),r(45),r(63),r(52);var n=r(9),o=r(21),c=r(28),l=r(32),f=r(26),d=r(22),h=r(7),y=r(154);function v(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(f.a)(this,r)}}var w=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},x=function(t){Object(l.a)(h,t);var e,f,d=k(h);function h(){var t;return Object(o.a)(this,h),(t=d.apply(this,arguments)).baseUrl="https://shibusawa-dlab.github.io/app1",t.keyword="",t.settings={agential:{type:"type:Agent",query:"fc-agentials",label:"人物"},place:{type:"type:Place",query:"fc-places",label:"場所"}},t.loadingFlag=!0,t.results=[],t.label="",t.people=[],t.total=0,t.perPage=20,t.currentPage=1,t.id="",t.index={},t.keywordStr="",t}return Object(c.a)(h,[{key:"watchTmp",value:function(){this.search()}},{key:"asyncData",value:(f=Object(n.a)(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.e(6260).then(r.t.bind(null,6892,3));case 2:return e=t.sent,n=e.default,t.abrupt("return",{results:n});case 5:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"mounted",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createIndex();case 2:return t.next=4,this.search();case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"createIndex",value:function(){var t=this.results,e=this.$route.params.id,r=this.$route.query.keyword||"";this.keyword=r;var n="agential"===e?e:"spatial";this.id=e,this.index=t[n]}},{key:"paginationLength",get:function(){return Math.ceil(this.total/this.perPage)}},{key:"search",value:function(){var t=this.index,e=this.id,r="agential"===e?e:"spatial";this.loadingFlag=!0;var n=Number(this.$route.query.from)||0;this.currentPage=n/this.perPage+1;var o,c=this.keyword,l=[],f=v(t);try{for(f.s();!(o=f.n()).done;){var d=o.value,label=d.id;if(""===c||label.includes(c)){var h={label:label+" ("+d.value.toLocaleString()+")",path:{name:"entity-entity-id",params:{entity:r,id:label}}};d.image?h.image=d.image:h.image="https://shibusawa-dlab.github.io/app1/img/icons/no-image.png";var y="https://shibusawa-dlab.github.io/app1/snorql/?describe="+d.id;h.url=y,l.push(h)}}}catch(t){f.e(t)}finally{f.f()}this.total=l.length,l=l.slice(n,n+this.perPage),this.people=l,this.loadingFlag=!1}},{key:"title",get:function(){return this.$t(this.settings[this.$route.params.id].label)}},{key:"head",value:function(){return{title:this.$t("category")+" : "+this.title,meta:[{hid:"description",name:"description",content:this.$t("search_by_category")}]}}},{key:"setCurrentPage",value:function(t){var e=(t-1)*this.perPage,r=Object.assign({},this.$route.query);r.from=e,this.$router.push(this.localePath({name:"entity-id",params:{id:this.id},query:r}),(function(){}),(function(){}))}},{key:"trigger",value:function(t){13===t.keyCode&&this.updateQuery()}},{key:"updateQuery",value:function(){var t=Object.assign({},this.$route.query);t.keyword=this.keyword,delete t.from,this.$router.push(this.localePath({name:"entity-id",params:{id:this.id},query:t}),(function(){}),(function(){}))}},{key:"updateQuery2",value:function(){var t,e=Object.assign({},this.$route.query),r=this.keywordStr;r||(r=""),t=r.startsWith('"')&&r.endsWith('"')?[r]:r.split(" "),e.keyword=t,delete e.from,this.$router.push(this.localePath({name:"entity-id",params:{id:this.id},query:e}),(function(){}),(function(){}))}},{key:"bh",get:function(){return[{text:this.$t("top"),disabled:!1,to:this.localePath({name:"index"}),exact:!0},{text:this.$t("person_place"),disabled:!1,to:this.localePath({name:"entity"}),exact:!0},{text:this.title}]}}]),h}(y.Vue);w([Object(y.Watch)("$route",{deep:!0})],x.prototype,"watchTmp",null);var O=x=w([Object(y.Component)({})],x),P=r(86),_=r(119),j=r.n(_),C=r(478),R=r(485),V=r(464),$=r(184),S=r(639),A=r(180),I=r(486),B=r(49),F=r(6873),component=Object(P.a)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-sheet",{attrs:{color:"grey lighten-2"}},[r("v-container",{staticClass:"py-4",attrs:{fluid:""}},[r("v-breadcrumbs",{staticClass:"py-0",attrs:{items:t.bh},scopedSlots:t._u([{key:"divider",fn:function(){return[r("v-icon",[t._v("mdi-chevron-right")])]},proxy:!0}])})],1)],1),t._v(" "),r("v-container",[r("h2",{staticClass:"my-5"},[t._v("\n      "+t._s(t.title)+" "),r("small",[t._v("（"+t._s(t.total.toLocaleString())+"）")])]),t._v(" "),t.loadingFlag?[r("div",{staticClass:"text-center my-5"},[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)]:[r("v-row",{staticClass:"mt-5",attrs:{align:"center"}},[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{staticClass:"px-4",attrs:{"single-line":"","background-color":"grey lighten-3",filled:"",rounded:"",dense:"",label:t.$t("add_a_search_term"),"append-icon":"mdi-magnify",clearable:"","clear-icon":"mdi-close-circle"},on:{"click:append":function(e){return t.updateQuery()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.trigger(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword /*keywordStr*/"}})],1)],1),t._v(" "),r("div",{staticClass:"text-center mt-5 mb-10"},[r("v-pagination",{attrs:{length:t.paginationLength,"total-visible":7},on:{input:t.setCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),r("grid",{attrs:{col:4,list:t.people}}),t._v(" "),r("div",{staticClass:"text-center my-5"},[r("v-pagination",{attrs:{length:t.paginationLength,"total-visible":7},on:{input:t.setCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]],2)],1)}),[],!1,null,null,null);e.default=component.exports;j()(component,{Grid:r(524).default}),j()(component,{VBreadcrumbs:C.a,VCol:R.a,VContainer:V.a,VIcon:$.a,VPagination:S.a,VProgressCircular:A.a,VRow:I.a,VSheet:B.a,VTextField:F.a})}}]);